<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    Webpackå­¦ä¹ ç¬”è®° |  çˆ±äº§å“ï¼Œçˆ±å‰ç«¯ï¼
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="../../../../css/style.css">

  
<script src="../../../../js/pace.min.js"></script>


  

  

<link rel="alternate" href="atom.xml" title="çˆ±äº§å“ï¼Œçˆ±å‰ç«¯ï¼" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-webpackå­¦ä¹ ç¬”è®°" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Webpackå­¦ä¹ ç¬”è®°
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="" class="article-date">
  <time datetime="2020-01-14T16:00:00.000Z" itemprop="datePublished">2020-01-15</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="../../../../categories/%E6%89%93%E6%80%AA%E5%8D%87%E7%BA%A7Webpack/">æ‰“æ€ªå‡çº§Webpack</a>
  </div>

      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> å­—æ•°ç»Ÿè®¡:</span>
            <span class="post-count">6.2kå­—</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> é˜…è¯»æ—¶é•¿â‰ˆ</span>
            <span class="post-count">27åˆ†é’Ÿ</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>Welcome to share creative thoughts!</p>
<p>æœ¬è´¨ä¸Šï¼Œwebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚</p>
<h2 id="å››ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š"><a href="#å››ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š" class="headerlink" title="å››ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š"></a>å››ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</h2><p>å…¥å£(entry)<br>è¾“å‡º(output)<br>loaderï¼šå®ç°éjsæ–‡ä»¶çš„æ‰“åŒ…ï¼Œæ¯”å¦‚css, img, htmlç­‰ï¼Œé€šè¿‡loaderåŠŸèƒ½<br>æ’ä»¶(plugins)ï¼šæœ‰æ•ˆåœ°æ‰“åŒ…å‹ç¼©css/img/htmlç­‰æ–‡ä»¶<br>loaderå’Œpluginsé…åˆä½¿ç”¨ã€‚</p>
<p>æ›´å¤šğŸ‘‰ï¼šå®˜æ–¹æ–‡æ¡£</p>
<h2 id="1-å…¨å±€å®‰è£…"><a href="#1-å…¨å±€å®‰è£…" class="headerlink" title="1.å…¨å±€å®‰è£…"></a>1.å…¨å±€å®‰è£…</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npm/cnpm install webpack -g</span><br><span class="line">npm/cnpm install webpack-cli -g</span><br><span class="line">æˆ–è€…</span><br><span class="line">npm/cnpm install webpack webpack-cli -g</span><br></pre></td></tr></table></figure>

<h2 id="2-é¡¹ç›®åˆå§‹åŒ–ï¼Œç”Ÿæˆpackage-json"><a href="#2-é¡¹ç›®åˆå§‹åŒ–ï¼Œç”Ÿæˆpackage-json" class="headerlink" title="2. é¡¹ç›®åˆå§‹åŒ–ï¼Œç”Ÿæˆpackage.json"></a>2. é¡¹ç›®åˆå§‹åŒ–ï¼Œç”Ÿæˆpackage.json</h2><p>è¿›å…¥é¡¹ç›®ç›®å½•project_dir<br>æ‰§è¡Œnpm initï¼Œä¸€è·¯å›è½¦ï¼Œé»˜è®¤å³å¯<br>é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ï¼Œä¼šç”Ÿæˆæ–‡ä»¶å¤¹node_moduleså’Œæ–‡ä»¶package.json</p>
<h2 id="3-å±€éƒ¨å®‰è£…"><a href="#3-å±€éƒ¨å®‰è£…" class="headerlink" title="3. å±€éƒ¨å®‰è£…"></a>3. å±€éƒ¨å®‰è£…</h2><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰“å¼€cmd<br>æ‰§è¡Œå‘½ä»¤ï¼š<br>npm/cnpm install webpack webpack-cli -S</p>
<h2 id="4-æ‰“åŒ…æµ‹è¯•"><a href="#4-æ‰“åŒ…æµ‹è¯•" class="headerlink" title="4. æ‰“åŒ…æµ‹è¯•"></a>4. æ‰“åŒ…æµ‹è¯•</h2><p>webpack4æ‰“åŒ…å‘½ä»¤ä¸ºï¼šwebpack</p>
<p>D:\wpack&gt;webpack<br>é»˜è®¤entryï¼šsrc/index.js</p>
<p>é»˜è®¤outputï¼šdist/main.js</p>
<p>é»˜è®¤æ‰“åŒ…æ¨¡å¼ä¸ºç”Ÿæˆç¯å¢ƒproduction</p>
<p>å¼€å‘æ¨¡å¼ï¼ˆä¸å‹ç¼©æ ¼å¼ï¼‰ï¼šwebpack â€“mode development</p>
<p>ç”Ÿäº§æ¨¡å¼ï¼ˆå‹ç¼©æ ¼å¼ï¼‰ï¼šwebpack â€“mode production</p>
<h2 id="5-åŸºæœ¬é…ç½®-webpack-config-js"><a href="#5-åŸºæœ¬é…ç½®-webpack-config-js" class="headerlink" title="5. åŸºæœ¬é…ç½®: webpack.config.js"></a>5. åŸºæœ¬é…ç½®: webpack.config.js</h2><p>5.1 webpack.config.jsé…ç½®</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">"production"</span>, <span class="comment">// ä¸¤ç§æ¨¡å¼ï¼šproductionå’Œdevelopmentï¼Œé»˜è®¤prodcution</span></span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'main.js'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼Œmodeæ¨¡å¼è®¾ç½®ï¼Œäº¦å¯åœ¨package.jsonä¸­è®¾ç½®ï¼Œé€‰ä¸€ç§æ–¹æ³•å³å¯ã€‚</p>
<p>5.2 package.jsoné…ç½®</p>
<p>åœ¨package.jsonæ–‡ä»¶ä¸­å¯ä»¥è¿›è¡Œä¸€äº›é…ç½®ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é…ç½®ä¸ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="string">"scripts"</span>: &#123;</span><br><span class="line">        <span class="comment">// testç­‰è„šæœ¬åå­—éšæ„è‡ªå®šä¹‰</span></span><br><span class="line">        <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">        <span class="comment">// å®šä¹‰ä¸€ä¸ªbuildè„šæœ¬ï¼ŒæŒ‡å®šconfigæ–‡ä»¶åç§°ï¼Œå¯ä»¥æ›´æ”¹é…ç½®æ–‡ä»¶çš„åå­—ï¼Œä¾‹å¦‚æ”¹ä¸ºwebpack.config.my.js</span></span><br><span class="line">        <span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.js"</span></span><br><span class="line">        <span class="comment">// modeè®¾ç½®ï¼Œwebpack.config.jsä¸­è®¾ç½®è¿‡modeåï¼Œæ­¤å¤„å¯ä¸ç”¨é‡å¤è®¾ç½®</span></span><br><span class="line">        <span class="string">"start"</span>: <span class="string">"webpack --mode development"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">æ‰§è¡Œè„šæœ¬ï¼š</span><br><span class="line"></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<h2 id="6-å®‰è£…æœ¬åœ°æœåŠ¡å™¨ï¼ˆdev-serverï¼‰ï¼š"><a href="#6-å®‰è£…æœ¬åœ°æœåŠ¡å™¨ï¼ˆdev-serverï¼‰ï¼š" class="headerlink" title="6 å®‰è£…æœ¬åœ°æœåŠ¡å™¨ï¼ˆdev-serverï¼‰ï¼š"></a>6 å®‰è£…æœ¬åœ°æœåŠ¡å™¨ï¼ˆdev-serverï¼‰ï¼š</h2><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼šnpm/cnpm install webpack-dev-server -S</p>
<p>webpack.config.jsä¸­ç›¸å…³é…ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'main2.js'</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<pre><code>// é…ç½®dev-server</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    devServer: &#123;</span><br><span class="line">        contentBase:<span class="string">"./dist"</span>,</span><br><span class="line">        <span class="comment">// æœ¬åœ°æœåŠ¡å™¨æ‰“åŒ…åæ–‡ä»¶ä¿å­˜è·¯å¾„</span></span><br><span class="line">        inline:<span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// å®æ—¶åˆ·æ–°å¼€å¯</span></span><br><span class="line">        port: <span class="number">3000</span>,</span><br><span class="line">        <span class="comment">// ç«¯å£è®¾ç½®</span></span><br><span class="line">        progress: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// æ‰“åŒ…è¿›åº¦æ¡å¼€å¯</span></span><br><span class="line">        compress: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// å¯åŠ¨å‹ç¼©</span></span><br><span class="line">        open: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>devServerä¸­è¿˜æœ‰å¾ˆå¤šé…ç½®é¡¹ç›®ï¼Œå¦‚portç«¯å£ç­‰ã€‚</p>
<p><strong>package.jsonä¸­ç›¸å…³é…ç½®ï¼š</strong>æ·»åŠ devè„šæœ¬ï¼Œé€šè¿‡æ‰§è¡Œnpm run devå®ç°è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨å¹¶åœ¨æ›´æ–°jsæ–‡ä»¶åè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">     <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">     <span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.js"</span>,</span><br><span class="line">     <span class="string">"start"</span>: <span class="string">"webpack --mode development"</span>,</span><br><span class="line">     <span class="comment">// å®šä¹‰ä¸€ä¸ªdevè„šæœ¬ï¼Œå¯åŠ¨æœåŠ¡å™¨</span></span><br><span class="line">     <span class="string">"dev"</span>: <span class="string">"webpack-dev-server --open --inline"</span></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<p>devè„šæœ¬è¯´æ˜ï¼š</p>
<p>webpack-dev-serverï¼šâ€å¯åŠ¨webpackæœ¬åœ°æœåŠ¡å™¨â€<br>â€“open: â€œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨â€<br>â€“inline: â€œæ›´æ–°jsåå®æ—¶åˆ·æ–°æµè§ˆå™¨â€<br>æ³¨ï¼šæ€»ç»“ï¼šæ¨¡å—æ‰“åŒ…æœºï¼Œåˆ†æé¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ°JSæ¨¡å—å’Œä¸€äº›æµè§ˆå™¨ä¸èƒ½ç›´æ¥è¿è¡Œçš„æ‹“å±•è¯­è¨€  scss  typescriptï¼Œå¹¶å°†å…¶æ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ç»™æµè§ˆå™¨ä½¿ç”¨.ä¼˜åŒ–äº§å‡ºï¼Œè§£æJSçš„æ¨¡å—ï¼Œä»¥å½“å‰çš„JSä¸ºå‡†ï¼ŒæŸ¥æ‰¾æ‰€æœ‰ç›¸å…³çš„ä¾èµ–æ–‡ä»¶ï¼ŒæŠŠæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œè§£å†³äº†requireé—®é¢˜ã€‚ç›®å½•æ˜¯dist<br>å‘½ä»¤æ˜¯npx webpack<br>æ‰‹åŠ¨é…ç½®ï¼Œwebpage.config.js<br>webpackæ˜¯nodeå†™å‡ºæ¥ çš„,è‡ªå·±é…ç½®å…¥å£å’Œå‡ºå£ï¼Œè·¯åŠ²å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„<br>path.resolveå¯ä»¥æŠŠç›¸å¯¹è·¯å¾„è§£ææˆç»å¯¹è·¯å¾„</p>
<h2 id="7-loaderé…ç½®"><a href="#7-loaderé…ç½®" class="headerlink" title="7. loaderé…ç½®"></a>7. loaderé…ç½®</h2><p>7.1 æµ‹è¯•æ— loaderæ—¶çš„æ‰“åŒ…</p>
<p>é¦–å…ˆåœ¨/srcä¸‹åˆ›å»ºä¸€ä¸ªstyle.cssæ–‡ä»¶ï¼Œç„¶ååœ¨å…¥å£æ–‡ä»¶index.jsä¸­å¼•å…¥ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>import â€˜./style.cssâ€™;<br>ä¿å­˜åï¼Œdev-serverè‡ªåŠ¨æ‰“åŒ…å¹¶åˆ·æ–°ï¼Œä½†ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Version: webpack <span class="number">4.41</span><span class="number">.2</span></span><br><span class="line">Time: <span class="number">28</span>ms</span><br><span class="line">Built at: <span class="number">2019</span><span class="number">-12</span><span class="number">-15</span> <span class="number">3</span>:<span class="number">04</span>:<span class="number">36</span> PM</span><br><span class="line">   Asset     Size  Chunks             Chunk Names</span><br><span class="line">main2.js  <span class="number">366</span> KiB    main  [emitted]  main</span><br><span class="line">Entrypoint main = main2.js</span><br><span class="line">[./src/index.js] <span class="number">200</span> bytes &#123;main&#125; [built]</span><br><span class="line">[./src/style.css] <span class="number">274</span> bytes &#123;main&#125; [built] [failed] [<span class="number">1</span> error]</span><br><span class="line">    + <span class="number">32</span> hidden modules</span><br><span class="line"></span><br><span class="line">ERROR <span class="keyword">in</span> ./src/style.css <span class="number">1</span>:<span class="number">4</span></span><br><span class="line">Module parse failed: Unexpected token (<span class="number">1</span>:<span class="number">4</span>)</span><br><span class="line">You may need an appropriate loader to handle <span class="keyword">this</span> file type, currently no loaders are configured to process <span class="keyword">this</span> file. See https:<span class="comment">//webpack.js.org/concepts#loaders</span></span><br><span class="line">&gt; body&#123;</span><br><span class="line">|     background-color: orange;</span><br><span class="line">| &#125;</span><br><span class="line"> @ ./src/index.js <span class="number">6</span>:<span class="number">0</span><span class="number">-21</span></span><br><span class="line">i ï½¢wdmï½£: Failed to compile.</span><br><span class="line">åŸå› ä¸ºï¼šæ²¡æœ‰ç›¸åº”çš„loaderã€‚</span><br></pre></td></tr></table></figure>

<p>7.2 é…ç½®loader</p>
<p>æ ¹æ®loaderåˆ—è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„loaderå¹¶ä¸‹è½½å®‰è£…ï¼ˆæ³¨æ„åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼‰ã€‚</p>
<p>å®‰è£…å¸¸ç”¨çš„loaderï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cnpm install style-loader css-loader -S</span><br><span class="line">cnpm install less less-loader -S</span><br><span class="line">cnpm install file-loader -S</span><br><span class="line">é…ç½®webpack.config.jsï¼š</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">       contentBase:<span class="string">"./dist"</span>,</span><br><span class="line">       <span class="comment">// æœ¬åœ°æœåŠ¡å™¨è·¯å¾„</span></span><br><span class="line">       inline:<span class="literal">true</span>,</span><br><span class="line">       <span class="comment">// å®æ—¶åˆ·æ–°å¼€å¯</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="built_in">module</span>: &#123;</span><br><span class="line">       rules: [</span><br><span class="line">           <span class="comment">// é…ç½®æ‰“åŒ…cssæ–‡ä»¶çš„loaderï¼Œuseå®šä¹‰ä½¿ç”¨åˆ°çš„loaderï¼Œæ³¨æ„é¡ºåº</span></span><br><span class="line">         	&#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>] &#125;,</span><br><span class="line">           <span class="comment">// é…ç½®å›¾ç‰‡çš„loader</span></span><br><span class="line">           &#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: [<span class="string">'file-loader'</span>] &#125;</span><br><span class="line">           <span class="comment">// æ ¹æ®éœ€è¦é…ç½®å…¶ä»–æ–‡ä»¶çš„loader</span></span><br><span class="line">       ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šstyle-loaderå¿…é¡»æ”¾åœ¨css-loaderå‰é¢ï¼Œæ‰§è¡Œæœ‰é¡ºåºï¼ˆé“¾å¼ä¼ é€’ï¼‰ï¼Œå¦åˆ™æŠ¥é”™ã€‚<br>ä»ä¸Šåˆ°ä¸‹ã€ä»å³è‡³å·¦ï¼Œé¡ºåºæ‰§è¡Œã€‚<br>bundleæ˜¯æ‰“åŒ…åçš„ç»“æœ<br>bundle.jsæ˜¯ä¸€ä¸ªåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°ï¼Œé»˜è®¤æ‰§è¡Œä¼šä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œkey  value<br>å½“å‰æ¨¡å—çš„è·¯å¾„æ˜¯key   valueå‡½æ•°æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡ä¸­æ‰¾åˆ°åå­—ï¼Œcallä¼ å…¥å½“å‰æ¨¡å—ï¼Œrequireçš„è¿”å›ç»“æœå°±æ˜¯æ¨¡å—çš„å¯¼å‡ºï¼ŒæŠŠè§£æçš„æ‰€æœ‰æ¨¡å—å˜æˆä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡å…¥å£åŠ è½½ï¼Œä¾æ¬¡å»é€’å½’å®ç°ä¾èµ–å…³ç³»ã€‚<br>å…¥å£æ–‡ä»¶ï¼Œæ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯åœ¨ç¼“å­˜ä¸­ï¼Œå®‰è£…æ¨¡å—ï¼Œ<br>dev:server:å¯ä»¥é…ç½®ç«¯å£ï¼ŒåŠ è¿›åº¦æ¡progress<br>contentbase:æ‰¾åˆ°æ–‡ä»¶å¤¹<br>å®ç°é™æ€æœåŠ¡ï¼Œnpm run dev<br>æ’ä»¶ï¼š<br>æ‰“åŒ…åå«bundle.js<br>HTMLWebpackPlugin<br>yarn add<br>æ’ä»¶æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ”¾ç€æ‰€æœ‰çš„æ’ä»¶<br>å…ˆnew ä¸€ä¸‹ï¼Œå‘Šè¯‰æ¨¡æ¿å’Œæ‰“åŒ…åçš„åå­— npm run dev<br>å“ˆå¸Œæˆ³ï¼Œåœ¨minifyé‡Œé¢é…ç½®<br>hashå¯ä»¥äº§ç”Ÿæ–°çš„æ—¶é—´æ ‡å¿—ï¼Œæ–‡ä»¶æœ‰æ›´æ”¹ï¼Œæ¯æ¬¡æ‰“åŒ…éƒ½ä¸ä¸€æ ·é˜²æ­¢è¦†ç›–ï¼ŒåŠ hashæŒ‡å®šä½æ•°ã€‚<br>é»˜è®¤åªè®¤å®šJSæ¨¡å—ï¼Œ æ¨¡å—è§£æå¤±è´¥  éœ€è¦loaderå¤„ç†CSSæ¨¡å—<br>æŠŠæºä»£ç è½¬æ¢ï¼Œè½¬åŒ–æˆä¸€ä¸ªæ¨¡å—ï¼Œé…ç½®module<br>æ‰¾åˆ°ä»¥CSSç»“å°¾çš„ï¼Œå†™æ­£åˆ™ï¼Œå†™ä¸ªè§„åˆ™æ•°ç»„ï¼Œå»åŒ¹é…ä¸åŒçš„æ–‡ä»¶ï¼Œ<br>åŒ¹é…CSSï¼Œ/.css$/<br>css-loader æ¥ç»­@import<br>style-loader  æŠŠCSSæ’å…¥åˆ°headçš„æ ‡ç­¾ä¸­<br><strong>loaderå•ä¸€èŒè´£ï¼Œå¤šä¸ªloaderéœ€è¦æ•°ç»„ï¼Œæœ‰é¡ºåº çš„ï¼Œé»˜è®¤ä»å³å‘å·¦ï¼Œä»ä¸‹åˆ°ä¸Šæ‰§è¡Œï¼Œå…ˆCSSå†æ’å…¥  loaderè¿˜å¯ä»¥å†™æˆå¯¹è±¡çš„æ–¹å¼ï¼Œå¯¹è±¡å¯ä»¥å¤šä¼ å‚æ•°</strong><br>less-loader  style-loader<br>optionsé‡Œé¢å¯ä»¥å†™é…ç½®å‚æ•°ï¼Œå†™æ’å…¥çš„ä½ç½®<br>less-loaderæŠŠless-&gt;css<br>yarn add less-loader<br>sass stylus sass-loader<br><strong>æ’ä»¶æ²¡æœ‰é¡ºåº<br>å•ç‹¬æŠ½ç¦»æ–‡ä»¶ mini-css-extract-plugin</strong><br>æ’ä»¶éƒ½æ˜¯ç±»ï¼Œnewä¸€ä¸‹ï¼Œå†™ä¸Šåå­—<br>post-css-loader<br>æ’ä»¶æœ‰:mini -css-extract-plugin<br>optimize-css-assets-webpack-plugin<br>sourcemapæºç æ˜ å°„</p>
<p>ruleçš„å¦ä¸€ç§ä¸°å¯Œé…ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.(css|less)$/</span>, <span class="attr">use</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">"style-loader"</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">						<span class="comment">// æ­¤å¤„å¯ä»¥è¿›è¡Œå…¶ä»–è®¾ç½®</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                    <span class="string">'css-loader'</span>, <span class="comment">// è§£æ@importè·¯å¾„</span></span><br><span class="line">                    <span class="string">'less-loader'</span> <span class="comment">// æŠŠlessè§£æä¸ºcss</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">å¦‚ä¸Šruleçš„æ‰§è¡Œé¡ºåºä¸ºï¼šless-loader &gt; css-loader &gt; style-loader &gt; options</span><br></pre></td></tr></table></figure>

<h2 id="8-æ’ä»¶plugins"><a href="#8-æ’ä»¶plugins" class="headerlink" title="8. æ’ä»¶plugins"></a>8. æ’ä»¶plugins</h2><p>æ’ä»¶åœ¨webpack.config.jsä¸­ä¸åŒºåˆ†é¡ºåºã€‚</p>
<p>8.1 Htmlæ–‡ä»¶å¤„ç†</p>
<p>ï¼Œæ‰“åŒ…htmlæ–‡ä»¶ï¼Œå®‰è£…æ’ä»¶ï¼ˆæ³¨æ„åœ¨é¡¹ç›®ç›®å½•ä¸‹å®‰è£…ï¼‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">cnpm install html-webpack-plugin -S</span><br><span class="line">é…ç½®webpack.config.jsï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// é…ç½®loader</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>] &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: [<span class="string">'file-loader'</span>] &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// é…ç½®æ’ä»¶</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">"./src/index.html"</span>, <span class="comment">// æ‰“åŒ…å‰çš„htmlæ–‡ä»¶</span></span><br><span class="line">            filename: <span class="string">"index.html"</span>, <span class="comment">// æ‰“åŒ…åçš„htmlæ–‡ä»¶å</span></span><br><span class="line">            minify: &#123;</span><br><span class="line">                removeAttributeQuotes: <span class="literal">true</span>, <span class="comment">// å»é™¤å¼•å·</span></span><br><span class="line">                removeComments: <span class="literal">true</span>, <span class="comment">// å»é™¤æ³¨æ„</span></span><br><span class="line">                removeEmptyAttributes: <span class="literal">true</span>,<span class="comment">// å»é™¤ç©ºå±æ€§</span></span><br><span class="line">                collapseWhitespace: <span class="literal">true</span> <span class="comment">// å»é™¤ç©ºæ ¼</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<p>8.2 æ ·å¼æŠ½ç¦»</p>
<p>å®‰è£…æŠ½ç¦»cssæ’ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev mini-css-extract-plugin</span><br><span class="line">é…ç½®webpack.config.jsï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">"mini-css-extract-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ–¹æ³•ä¸‰ï¼š ä½¿ç”¨æŠ½ç¦»</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [</span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    <span class="string">'css-loader'</span>, <span class="comment">// è§£æ@importè·¯å¾„</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.less$/</span>, <span class="attr">use</span>: [</span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    <span class="string">'css-loader'</span>, <span class="comment">// è§£æ@importè·¯å¾„</span></span><br><span class="line">                    <span class="string">'less-loader'</span> <span class="comment">// æŠŠlessè§£æä¸ºcss</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: [<span class="string">'file-loader'</span>] &#125;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// æ·»åŠ cssæŠ½ç¦»æ’ä»¶</span></span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">"main.css"</span>, <span class="comment">// è®¾ç½®æ–‡ä»¶ï¼ŒcssæŠ½ç¦»ä¸ºmain.cssæ–‡ä»¶ä¸­</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<p>æŠ½ç¦»å‡ºçš„main.cssæ²¡æœ‰è¢«å‹ç¼©ï¼Œéœ€å®‰è£…æ’ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev terser-webpack-plugin <span class="comment">// å‹ç¼©js</span></span><br><span class="line">cnpm install --save-dev optimize-css-assets-webpack-plugin  <span class="comment">// å‹ç¼©æŠ½ç¦»çš„css</span></span><br><span class="line">æ³¨æ„ï¼šä»¥ä¸Šä¸¤ä¸ªæ’ä»¶éœ€é…åˆä½¿ç”¨ï¼ŒåŒæ—¶é…ç½®ï¼Œå¦‚åªé…ç½®cssæ’ä»¶ï¼Œåˆ™jsä¸ä¼šè¢«å‹ç¼©ã€‚</span><br></pre></td></tr></table></figure>

<p>å¹¶é…ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">"mini-css-extract-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> TerserJSPlugin = <span class="built_in">require</span>(<span class="string">"terser-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">"optimize-css-assets-webpack-plugin"</span>);</span><br><span class="line"><span class="comment">// æ­¤å¤„çœç•¥...</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">"production"</span>, <span class="comment">//æ­¤å¤„å¿…é¡»è®¾ç½®ä¸ºproductionæ¨¡å¼ï¼Œå¦åˆ™æŠ½ç¦»çš„cssæ–‡ä»¶ä¸ä¼šè¢«å‹ç¼©</span></span><br><span class="line">    <span class="comment">// æ­¤å¤„çœç•¥...</span></span><br><span class="line">    optimization: &#123; <span class="comment">// ä¼˜åŒ–é¡¹</span></span><br><span class="line">        minimizer: [</span><br><span class="line">            <span class="comment">// åŒæ—¶å®ç°jsæ–‡ä»¶çš„å‹ç¼©ï¼Œä¸cssæŠ½ç¦»å‹ç¼©æ’ä»¶åŒæ—¶é…åˆä½¿ç”¨ï¼Œæ›¿ä»£uglify</span></span><br><span class="line">            <span class="keyword">new</span> TerserJSPlugin(&#123;&#125;),</span><br><span class="line">            <span class="comment">// å‹ç¼©æŠ½ç¦»åçš„cssæ–‡ä»¶ï¼Œæ­¤ä¼˜åŒ–ä»…åœ¨productionæ¨¡å¼æœ‰æ•ˆï¼Œdevelopmentæ¨¡å¼ä¸‹ä¸å‹ç¼©</span></span><br><span class="line">            <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>:&#123;</span><br><span class="line">        <span class="comment">// æ­¤å¤„çœç•¥...</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins:&#123;</span><br><span class="line">        <span class="comment">// æ­¤å¤„çœç•¥...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ä¼˜åŒ–é¡¹é…ç½®å®Œæˆåï¼ŒæŠ½ç¦»çš„cssæ–‡ä»¶å’Œjsæ–‡ä»¶å³å¯æ­£å¸¸åŒæ—¶è¢«å‹ç¼©ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="9-JSè¯­æ³•è½¬åŒ–"><a href="#9-JSè¯­æ³•è½¬åŒ–" class="headerlink" title="9. JSè¯­æ³•è½¬åŒ–"></a>9. JSè¯­æ³•è½¬åŒ–</h2><p>ä½¿ç”¨babelæ¨¡å—ã€‚<br>å®‰è£…åŸºç¡€loaderï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">npm install -D babel-loader @babel/core @babel/preset-env webpack</span><br><span class="line">å®‰è£…è½¬åŒ–<span class="class"><span class="keyword">class</span>å®šä¹‰çš„å¯¹è±¡çš„<span class="title">loader</span>ï¼š</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">npm</span> <span class="title">install</span> --<span class="title">save</span>-<span class="title">dev</span> @<span class="title">babel</span>/<span class="title">plugin</span>-<span class="title">proposal</span>-<span class="title">class</span>-<span class="title">properties</span></span></span><br><span class="line"><span class="class">å®‰è£…è½¬åŒ–è£…é¥°å™¨ç”¨æ³•çš„<span class="title">loader</span>ï¼š</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">npm</span> <span class="title">install</span> --<span class="title">save</span>-<span class="title">dev</span> @<span class="title">babel</span>/<span class="title">plugin</span>-<span class="title">proposal</span>-<span class="title">decorators</span></span></span><br><span class="line"><span class="class">é…ç½®<span class="title">webpack</span>.<span class="title">config</span>.<span class="title">js</span>ï¼š</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// æ­¤å¤„çœç•¥...</span></span><br><span class="line"><span class="class"><span class="title">module</span>.<span class="title">exports</span> </span>= &#123;</span><br><span class="line"><span class="comment">// æ­¤å¤„çœç•¥...</span></span><br><span class="line">    rules: [</span><br><span class="line">            <span class="comment">// æ­¤å¤„çœç•¥...</span></span><br><span class="line">            <span class="comment">// jsè¯­æ³•è½¬åŒ–</span></span><br><span class="line">            &#123;<span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: &#123;</span><br><span class="line">                loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                  presets: [<span class="string">'@babel/preset-env'</span>],</span><br><span class="line">                  plugins: [  <span class="comment">// å‚è€ƒæ–‡æ¡£é…ç½®</span></span><br><span class="line">                      <span class="comment">// '@babel/plugin-proposal-object-rest-spread',</span></span><br><span class="line">                      [<span class="string">"@babel/plugin-proposal-decorators"</span>, &#123; <span class="string">"legacy"</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">                      [<span class="string">"@babel/plugin-proposal-class-properties"</span>, &#123; <span class="string">"loose"</span> : <span class="literal">true</span> &#125;]</span><br><span class="line">                  ]</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br><span class="line">å¦‚æœ‰éœ€è¦å…¶ä»–babel-loaderï¼Œå¯é€šè¿‡å®˜ç½‘æŸ¥æ‰¾å®‰è£…å¹¶é…ç½®ã€‚</span><br></pre></td></tr></table></figure>
<p>è½¬åŒ–ES6è¯­æ³•<br>babelè½¬æ¢JSè½¬æˆES5 æ ¸å¿ƒæ¨¡å—å¯ä»¥è½¬æ¢æºä»£ç <br>yarn add babel-loader @babel/core  @babel/preset-env  è½¬åŒ–JSè¯­æ³•<br>promiseä¹Ÿä¸ä¼šè½¬åŒ–ï¼Œè¦å®‰è£…babelä»£ç è¿è¡Œçš„åŒ…<br>@Babel/plugin-transform-runtime<br>@Babel-polyfill<br>jsè¯­æ³•æ ¡éªŒå™¨ï¼šESLint   æ ¡éªŒè¯­æ³•è§„èŒƒ<br>yarn add eslint eslint-loader   è‡ªå·±é€‰æ‹©å…¬å¸éœ€è¦çš„ç¯å¢ƒå’Œè§„åˆ™ï¼Œä¸‹è½½json æ–‡ä»¶æ”¾åˆ°é…ç½®ä¸­<br>enforce:â€preâ€   å¯ä»¥å¼ºåˆ¶æ”¹å˜æ‰§è¡Œé¡ºåº</p>
<h2 id="10-å›¾ç‰‡å¤„ç†"><a href="#10-å›¾ç‰‡å¤„ç†" class="headerlink" title="10. å›¾ç‰‡å¤„ç†"></a>10. å›¾ç‰‡å¤„ç†</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt; åœ¨jsä¸­åˆ›å»ºå›¾ç‰‡æ¥å¼•å…¥:</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> bgimg <span class="keyword">from</span> <span class="string">'./2.png'</span>; <span class="comment">// å¼•å…¥å›¾ç‰‡å¹¶è¿”å›æ–°çš„å›¾ç‰‡åœ°å€</span></span><br><span class="line"><span class="keyword">let</span> image = <span class="keyword">new</span> Image();</span><br><span class="line"><span class="built_in">console</span>.log(image);</span><br><span class="line">image.src = bgimg;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(image);</span><br><span class="line"><span class="number">2</span>&gt; åœ¨CSSä¸­å¼•å…¥å›¾ç‰‡:</span><br><span class="line"></span><br><span class="line">body&#123;</span><br><span class="line">    background-color: yellow;</span><br><span class="line">    background-image: url(<span class="string">"2.png"</span>);</span><br><span class="line">&#125;</span><br><span class="line">div&#123;</span><br><span class="line">    background-image: url(<span class="string">'./1.jpg'</span>);</span><br><span class="line">    width: <span class="number">500</span>px;</span><br><span class="line">    height: <span class="number">700</span>px;</span><br><span class="line">&#125;</span><br><span class="line">ç„¶åç”±jså¯¼å…¥ï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./style.css'</span>;</span><br><span class="line"><span class="number">3</span>&gt; htmlä¸­imgæ ‡ç­¾å¼•å…¥å›¾ç‰‡ï¼š</span><br><span class="line"></span><br><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: &#123;</span><br><span class="line">                loader: <span class="string">'file-loader'</span>,</span><br><span class="line">                options:&#123;</span><br><span class="line">                    esModule: <span class="literal">false</span>, <span class="comment">// æ­¤å¤„å¿…é¡»åŠ ï¼Œå¦åˆ™æ— æ³•å‹ç¼©å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.html$/</span>, <span class="attr">use</span>: &#123;</span><br><span class="line">                loader: <span class="string">'html-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    attrs: [<span class="string">':src'</span>, <span class="string">':data-src'</span>],</span><br><span class="line">                    minimize:<span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; &#125;,</span><br><span class="line">            <span class="comment">// &#123; test: /\.html$/, use: 'html-withimg-loader' &#125;,</span></span><br></pre></td></tr></table></figure>

<h2 id="11-æŒ‡å®šè·¯å¾„"><a href="#11-æŒ‡å®šè·¯å¾„" class="headerlink" title="11. æŒ‡å®šè·¯å¾„"></a>11. æŒ‡å®šè·¯å¾„</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt; å•ç‹¬ä½imgè·¯å¾„æ·»åŠ åŸŸåå‰ç¼€ï¼š</span><br><span class="line"></span><br><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: &#123;</span><br><span class="line">                loader: <span class="string">'file-loader'</span>,</span><br><span class="line">                options:&#123;</span><br><span class="line">                    esModule: <span class="literal">false</span>,</span><br><span class="line">                    outputPath: <span class="string">'/img/'</span>,  <span class="comment">// å­˜æ”¾åœ¨imgæ–‡ä»¶å¤¹ä¸‹</span></span><br><span class="line">                    publicPath: <span class="string">'htpp://localhost'</span> <span class="comment">// è·¯å¾„å‰æ·»åŠ åŸŸåï¼Œæ­¤æ—¶/img/æ–‡ä»¶å¤¹å¤±æ•ˆï¼›</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; &#125;,</span><br><span class="line">æ•…ï¼Œå…¶ä»–æ–‡ä»¶å¯è¿›è¡Œç±»ä¼¼å•ç‹¬è®¾ç½®ã€‚ <span class="number">2</span>&gt; ä¸ºimg/css/jsç­‰æ–‡ä»¶ç»Ÿä¸€æ·»åŠ åŸŸåå‰ç¼€ï¼š</span><br><span class="line"></span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'bundle-[hash:8].js'</span>,  <span class="comment">// bundle-[hash].js ç»™æ–‡ä»¶åå¢åŠ hashå€¼,[hash:8]æ˜¾ç¤ºå‰8ä½</span></span><br><span class="line">        publicPath: <span class="string">'http://localhost'</span>  <span class="comment">// ä¸ºæ‰€æœ‰è·¯å¾„æ·»åŠ åŸŸåå‰ç¼€</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>3&gt;ä¸ºcssæŒ‡å®šå­˜æ”¾æ–‡ä»¶å¤¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">      <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">          filename: <span class="string">"css/main.css"</span>, <span class="comment">// cssæŠ½ç¦»ä¸ºmain.cssæ–‡ä»¶ä¸­,å¹¶å­˜æ”¾åªdist/cssæ–‡ä»¶å¤¹ä¸‹</span></span><br><span class="line">      &#125;)</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>

<h2 id="12-å¤šé¡µé¢æ‰“åŒ…"><a href="#12-å¤šé¡µé¢æ‰“åŒ…" class="headerlink" title="12. å¤šé¡µé¢æ‰“åŒ…"></a>12. å¤šé¡µé¢æ‰“åŒ…</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt; å¤šå…¥å£entryã€å¤šå‡ºå£outputè®¾ç½®ï¼š</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å•å…¥å£</span></span><br><span class="line">    <span class="comment">// entry: './src/index.js',</span></span><br><span class="line">    <span class="comment">// å¤šå…¥å£</span></span><br><span class="line">    entry: &#123;</span><br><span class="line">        home: <span class="string">'./src/index.js'</span>,</span><br><span class="line">        other: <span class="string">'./src/other.js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å¯¹åº”å¤šå‡ºå£</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        <span class="comment">// å•å‡ºå£è®¾ç½®</span></span><br><span class="line">        <span class="comment">// filename: 'bundle-[hash:8].js',  // bundle-[hash].js ç»™æ–‡ä»¶åå¢åŠ hashå€¼,[hash:8]æ˜¾ç¤ºå‰8ä½</span></span><br><span class="line">        <span class="comment">// path: path.resolve(__dirname, 'dist'),</span></span><br><span class="line">        <span class="comment">// å¤šå‡ºå£è®¾ç½®, [name]ä»£è¡¨å¤šå…¥å£å˜é‡åhome,otherï¼Œé€ä¸€æ‰“åŒ…</span></span><br><span class="line">        filename: <span class="string">'[name].js'</span>, <span class="comment">// ä»å¯ä»¥åŠ hashå€¼</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        <span class="comment">// publicPath: 'http://localhost'</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>2&gt; html-webpack-pluginè®¾ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">"./index.html"</span>,</span><br><span class="line">            filename: <span class="string">"index.html"</span>,</span><br><span class="line">            chunks: [<span class="string">'home'</span>], <span class="comment">// å¤šé¡µé¢æ‰“åŒ…è®¾ç½®ï¼Œå¯¹åº”å…¥å£js</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// å¤šé¡µé¢æ‰“åŒ…ï¼Œå¤šä¸ªnewï¼Œå•é¡µé¢å¯ä»¥å¼•å…¥å¤šä¸ªå…¥å£js</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">"./other.html"</span>,</span><br><span class="line">            filename: <span class="string">"other.html"</span>,</span><br><span class="line">            chunks: [<span class="string">'other'</span>, <span class="string">'home'</span>], <span class="comment">// å¤šé¡µé¢æ‰“åŒ…è®¾ç½®ï¼Œå¯¹åº”å…¥å£js, å…ˆå¼•å…¥homeå†other</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<h2 id="13-é…ç½®source-map"><a href="#13-é…ç½®source-map" class="headerlink" title="13. é…ç½®source-map"></a>13. é…ç½®source-map</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">tipsï¼šsource-mapä¼šæ˜æ˜¾å¢åŠ æ‰“åŒ…æ—¶é—´ã€‚ éœ€è¦å®‰è£…çš„åŒ…ï¼š @babel/core @babel/preset-env babel-loader webpack-dev-server è®¾ç½®ï¼š</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        home: <span class="string">'./src/index.js'</span>,</span><br><span class="line">        other: <span class="string">'./src/other.js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å¯¹åº”å¤šå‡ºå£</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">'[name].js'</span>,</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 1ï¼‰æºç æ˜ å°„ï¼Œå•ç‹¬ç”Ÿæˆä¸€ä¸ªsourcemapæ–‡ä»¶ï¼Œå‡ºé”™æ—¶ä¼šç›´æ¥æç¤ºæŠ¥é”™è¡Œ</span></span><br><span class="line">    <span class="comment">// devtool: 'source-map', // å¤§è€Œå…¨çš„è®¾ç½®</span></span><br><span class="line">    <span class="comment">// 2ï¼‰æºç æ˜ å°„ï¼Œä¸ä¼šäº§ç”Ÿå•ç‹¬çš„æ–‡ä»¶ï¼Œå•ä¼šç›´æ¥æ˜¾ç¤ºé”™è¯¯çš„è¡Œåˆ—</span></span><br><span class="line">    <span class="comment">// devtool: 'eval-source-map',</span></span><br><span class="line">    <span class="comment">// 3) ä¸ä¼šäº§ç”Ÿåˆ—ï¼Œä½†æ˜¯ä¼šç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„æ˜ å°„æ–‡ä»¶</span></span><br><span class="line">    <span class="comment">// devtool: 'cheap-module-source-map', // äº§ç”Ÿåå¯ä»¥ä¿ç•™èµ·æ¥</span></span><br><span class="line">    <span class="comment">// 4) ä¸ä¼šäº§ç”Ÿæ–‡ä»¶ï¼Œé›†æˆå†æ‰“åŒ…åçš„æ–‡ä»¶ä¸­ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿåˆ—</span></span><br><span class="line">    devtool: <span class="string">'cheap-module-source-map'</span>, <span class="comment">// äº§ç”Ÿåå¯ä»¥ä¿ç•™èµ·æ¥</span></span><br><span class="line">&#125;</span><br><span class="line">psï¼šä»¥ä¸Š<span class="number">4</span>ä¸ªæ–¹æ³•è²Œä¼¼éƒ½ç”Ÿæˆmapæ–‡ä»¶äº†</span><br></pre></td></tr></table></figure>

<h2 id="14-watchå®æ—¶æ‰“åŒ…"><a href="#14-watchå®æ—¶æ‰“åŒ…" class="headerlink" title="14. watchå®æ—¶æ‰“åŒ…"></a>14. watchå®æ—¶æ‰“åŒ…</h2><p>å¸Œæœ›å®æ—¶æ‰“åŒ…ï¼Œå¼€å¯ç›‘æ§ï¼Œ<br>è®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devtool: <span class="string">'cheap-module-source-map'</span>, <span class="comment">// äº§ç”Ÿåå¯ä»¥ä¿ç•™èµ·æ¥</span></span><br><span class="line">    <span class="comment">// å¼€å¯ç›‘æ§ï¼Œå®æ—¶æ‰“åŒ…è®¾ç½®</span></span><br><span class="line">    watch: <span class="literal">true</span>,<span class="comment">//</span></span><br><span class="line">    watchOptions:&#123; <span class="comment">// è®¾ç½®ç›‘æ§é€‰é¡¹</span></span><br><span class="line">        poll: <span class="number">1000</span>, <span class="comment">// æ¯ç§’æŸ¥è¯¢1000æ¬¡ï¼Œæˆ‘éœ€è¦æ›´æ–°å—ï¼Ÿ</span></span><br><span class="line">        aggregateTimeout: <span class="number">500</span>, <span class="comment">// é˜²æŠ–ï¼Œctrl+såå¤šä¹…å¼€å§‹æ‰“åŒ…  500 MSå†…æˆ‘è¾“å…¥çš„ä»£ç åªæ‰“åŒ…ä¸€æ¬¡</span></span><br><span class="line">        ignored: <span class="regexp">/node_modules/</span>, <span class="comment">// å¿½ç•¥ä¸éœ€è¦ç›‘æ§çš„æ–‡ä»¶å¤¹ï¼Œä¸ç”¨ç›‘æ§</span></span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;&#125;<span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="15-å¸¸ç”¨æ’ä»¶ï¼ˆ3ä¸ªï¼‰"><a href="#15-å¸¸ç”¨æ’ä»¶ï¼ˆ3ä¸ªï¼‰" class="headerlink" title="15. å¸¸ç”¨æ’ä»¶ï¼ˆ3ä¸ªï¼‰"></a>15. å¸¸ç”¨æ’ä»¶ï¼ˆ3ä¸ªï¼‰</h2><p>å®‰è£…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev clean-webpack-plugin</span><br><span class="line">cnpm install --save-dev copy-webpack-plugin</span><br><span class="line">cleanwebpackPlugin -- æ‰“åŒ…å‰æ¸…é™¤distç›®å½•</span><br><span class="line">copywebpackPlugin -- copyç›®å½•ä¸­çš„æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</span><br><span class="line">bannerPlugin -- ç‰ˆæƒå£°æ˜æ’ä»¶ï¼Œwebpackå†…éƒ¨æ’ä»¶ï¼Œæ— éœ€å®‰è£… å¼•å…¥ï¼š</span><br><span class="line"><span class="keyword">const</span> &#123;CleanWebpackPlugin&#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">"copy-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>); <span class="comment">// å†…ç½®bannerPluginæ’ä»¶</span></span><br><span class="line"></span><br><span class="line">plugins:[</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(), <span class="comment">// å…ˆåˆ é™¤distç›®å½•å†æ‰“åŒ…ï¼Œä¸ç”¨å¡«å‚æ•°</span></span><br><span class="line">    <span class="keyword">new</span> CopyWebpackPlugin([ <span class="comment">// å¯ä»¥è®¾ç½®å¤šç»„from to</span></span><br><span class="line">        &#123;<span class="attr">from</span>:<span class="string">'doc'</span>, <span class="attr">to</span>:<span class="string">'./'</span>&#125;</span><br><span class="line">    ]),</span><br><span class="line">    <span class="keyword">new</span> webpack.BannerPlugin(<span class="string">"Make 2019 by Hanoso"</span>), <span class="comment">// å£°æ˜ç‰ˆæƒä¿¡æ¯</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>psï¼šå¸¸ç”¨æ’ä»¶å¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œå†³å®šå®‰è£…~</p>
<h2 id="16-webpackè·¨åŸŸé—®é¢˜"><a href="#16-webpackè·¨åŸŸé—®é¢˜" class="headerlink" title="16. webpackè·¨åŸŸé—®é¢˜"></a>16. webpackè·¨åŸŸé—®é¢˜</h2><p>è·¨åŸŸï¼šè¯·æ±‚ç«¯å’Œå“åº”ç«¯åŸŸå/ç«¯å£ä¸ä¸€è‡´ï¼Œå³ä¸ºè·¨åŸŸã€‚ é»˜è®¤è®¿é—®çš„è·¯å¾„<a href="http://localhost:8081" target="_blank" rel="noopener">http://localhost:8081</a> webpack-dev-sereræœåŠ¡è·¯å¾„ =&gt; æœåŠ¡å™¨ç«¯å£3000ç«¯å£ â€“&gt;è·¨åŸŸ</p>
<p>1ï¼‰ æ–¹æ³•ä¸€ï¼šé…ç½®ä»£ç†</p>
<p>é¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºserver.jsæœåŠ¡ç«¯æ–‡ä»¶ï¼›<br>é…ç½®devServerä»£ç†ï¼›</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">åœ¨index.jsä¸­é…ç½®Ajaxè¯·æ±‚å“åº”ã€‚</span><br><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="comment">// express</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);   <span class="comment">// å¼•å…¥expressï¼Œé»˜è®¤ä¼šå¯ç”¨æœåŠ¡</span></span><br><span class="line"><span class="keyword">let</span> app = express(); <span class="comment">// åˆ›å»ºappæœåŠ¡ï¼Œè®©expressæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// /api/user, /test/userï¼Œè¯·æ±‚è·¯å¾„ä¸­çš„mockè¢«æ›¿æ¢ä¸ºç©º</span></span><br><span class="line">app.get(<span class="string">'/user'</span>,(req,res)=&gt;&#123; <span class="comment">// å†™æ¥å£ï¼Œè¯·æ±‚reqå“åº”resï¼Œgetè¯·æ±‚è·¯å¾„/userï¼Œå›è°ƒå‡½æ•°</span></span><br><span class="line">    res.json(&#123;<span class="attr">name</span>:<span class="string">'Hanoso666'</span>&#125;) <span class="comment">// è¿”å›çš„å“åº”json</span></span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>); <span class="comment">// ç›‘å¬3000ç«¯å£</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">devServer&#123;</span><br><span class="line">            <span class="comment">// é…ç½®ä»£ç†</span></span><br><span class="line">        proxy:&#123;</span><br><span class="line">            <span class="string">'/api'</span>: &#123;</span><br><span class="line">                <span class="comment">// webpacké»˜è®¤é¦–é¡µæ‰“å¼€æœª8081ç«¯å£ï¼Œé…ç½®targetè½¬è‡³3000ç«¯å£ï¼Œä¸</span></span><br><span class="line">                <span class="comment">// server.jsç«¯å£ä¿æŒä¸€è‡´ï¼Œä»è€Œè§£å†³è·¨åŸŸé—®é¢˜</span></span><br><span class="line">                target: <span class="string">'http://localhost:3000'</span>,<span class="comment">//å‘Šè¯‰å»3000æ‰¾APIçš„user</span></span><br><span class="line">                pathRewrite: &#123;<span class="string">'^/api'</span>:<span class="string">''</span>&#125;, <span class="comment">// å°†è¯·æ±‚è·¯å¾„ä¸­å¼€å¤´/apiæ›¿æ¢ä¸ºç©ºï¼Œé€šè¿‡é‡å†™çš„æ–¹æ³•æŠŠè¯·æ±‚ä»£ç†åˆ°expressæœåŠ¡å™¨ä¸Šï¼Œå‰ææ˜¯æœ‰æœåŠ¡å™¨ã€‚</span></span><br><span class="line">                <span class="comment">// è¯·æ±‚ç«¯è·¯å¾„/api/userï¼Œå®é™…æƒ…å†µä¸ç¡®å®šï¼Œå¯ä»¥æœ‰å¾ˆå¤šå†™æ³•ï¼Œå¦‚/test/user, /new/userç­‰ç­‰ï¼Œä¸ºé¿å…é‡å¤è®¾ç½®ï¼Œå¯å°†å‰ç«¯è¯·æ±‚è·¯å¾„ç»Ÿä¸€ä»¥/mockå¼€å¤´ï¼Œå¦‚/mock/api/user, /mock/test/user, /mock/new/user, ç„¶åå°†/mockæ›¿æ¢ä¸ºç©ºï¼Œserver.jsä¸­å»æ‰/mock</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest(); <span class="comment">// åˆ›å»ºAjaxå¯¹è±¡</span></span><br><span class="line">xhr.open(<span class="string">'GET'</span>,<span class="string">'/api/user'</span>,<span class="literal">true</span>); <span class="comment">// å»ºç«‹GETè¯·æ±‚ æŒ‡å®šæ–¹æ³•ï¼Œè·¯å¾„ï¼Œæ˜¯å¦å¼‚æ­¥  /mock/api/user, /mock/test/user</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.response); <span class="comment">// è®¾ç½®å›è°ƒï¼Œå¤„ç†ç»“æœ</span></span><br><span class="line">&#125;</span><br><span class="line">xhr.send(); <span class="comment">// å‘é€Ajaxè¯·æ±‚</span></span><br><span class="line">ç»“æœï¼šå¯åŠ¨devå’Œserver.jsåï¼Œè®¿é—®http:<span class="comment">//localhost:8081å³å¯ç»ä»£ç†å®ç°server.jså“åº”ï¼Œ8081æ˜¯webpack-dev-serverçš„æœåŠ¡</span></span><br><span class="line">ä½†æ˜¯ä¸åœ¨ä¸€ä¸ªç«¯å£ï¼Œè¦é…ç½®ä»£ç†proxyã€‚</span><br></pre></td></tr></table></figure>

<p>2ï¼‰æ–¹æ³•äºŒï¼šå½“å‰ç«¯åªæƒ³å•çº¯æ¨¡æ‹Ÿæ•°æ®æ—¶ï¼Œä¸éœ€è¦å†™server.jsï¼Œåªæ¨¡æ‹Ÿå‰ç«¯æ•°æ® åœ¨devServerä¸­è®¾ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.cofig.js</span></span><br><span class="line">devServer&#123;</span><br><span class="line">        before(app)&#123; <span class="comment">// å†…éƒ¨çš„æä¾›æ–¹æ³•ï¼Œé’©å­</span></span><br><span class="line">            app.get(<span class="string">'/user'</span>,(req,res)=&gt;&#123; <span class="comment">// è·¯å¾„ä¸index.jsè¯·æ±‚è·¯å¾„ä¸€è‡´å³å¯</span></span><br><span class="line">                res.json(&#123;<span class="attr">name</span>:<span class="string">'Hanoso2020'</span>&#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="comment">// express</span></span><br><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest(); <span class="comment">// åˆ›å»ºAjaxå¯¹è±¡</span></span><br><span class="line">xhr.open(<span class="string">'GET'</span>,<span class="string">'/api/user'</span>,<span class="literal">true</span>); <span class="comment">// å»ºç«‹GETè¯·æ±‚ /mock/api/user, /mock/test/user</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.response); <span class="comment">// è®¾ç½®å›è°ƒ</span></span><br><span class="line">&#125;</span><br><span class="line">xhr.send(); <span class="comment">// å‘é€Ajaxè¯·æ±‚</span></span><br></pre></td></tr></table></figure>

<p>3ï¼‰æ–¹æ³•ä¸‰ï¼šæœ‰æœåŠ¡ç«¯ï¼Œä¸ç”¨ä»£ç†æ¥å¤„ç†ï¼Œèƒ½ä¸èƒ½åœ¨æœåŠ¡ç«¯å¯åŠ¨webpack? webpackå°±æ˜¯ä¸€ä¸ªæ¨¡å—<br>é‡‡ç”¨ä¸­é—´ä»¶ å°±å¯ä»¥ï¼ ä»…åœ¨server.jsä¸­é…ç½®ï¼Œå…ˆé€šè¿‡webpackæ‹¿åˆ°é…ç½®å¯¹è±¡ï¼Œäº§ç”Ÿç¼–è¯‘å¯¹è±¡ ï¼Œæ‰”ç»™ä¸­é—´ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">let</span> app = express();</span><br><span class="line"><span class="keyword">let</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="comment">// ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">let</span> middle = <span class="built_in">require</span>(<span class="string">'webpack-dev-middleware'</span>);</span><br><span class="line"><span class="keyword">let</span> config = <span class="built_in">require</span>(<span class="string">'./webpack.config.js'</span>);<span class="comment">//æ‹¿åˆ°é…ç½®å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> compailer = webpack(config); <span class="comment">// å¯åŠ¨server.jsæ—¶å¯åŠ¨webpackï¼Œç”±æœåŠ¡å™¨ç«¯å¯åŠ¨å‰ç«¯ï¼Œå¤„ç†é…ç½®æ–‡ä»¶ï¼Œè¿”å›ç¼–è¯‘åçš„ç»“æœ</span></span><br><span class="line"></span><br><span class="line">app.use(middle(compailer));<span class="comment">//åŠ è½½ä¸­é—´ä»¶</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/user'</span>,(req,res)=&gt;&#123;</span><br><span class="line">    res.json(&#123;<span class="attr">name</span>:<span class="string">'Hanoso-middle'</span>&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);  <span class="comment">// ç«¯å£å¯æŒ‰éœ€é…ç½®</span></span><br><span class="line">é€šè¿‡è®¿é—®localhost:<span class="number">300</span>/useræ‰“å¼€ç½‘é¡µï¼Œå³å¯å®ç°æ•°æ®æ‰“å°&#123;<span class="string">"name"</span>:<span class="string">"Hanoso-middle"</span>&#125;ï¼Œå³è®¾ç½®æˆåŠŸã€‚</span><br></pre></td></tr></table></figure>

<h2 id="17-resolveè§£æç¬¬ä¸‰æ–¹åŒ…"><a href="#17-resolveè§£æç¬¬ä¸‰æ–¹åŒ…" class="headerlink" title="17. resolveè§£æç¬¬ä¸‰æ–¹åŒ…"></a>17. resolveè§£æç¬¬ä¸‰æ–¹åŒ…</h2><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span>.modules&#123;</span><br><span class="line">    resolve:&#123; <span class="comment">// è§£æç¬¬ä¸‰æ–¹åŒ…</span></span><br><span class="line">        modules:[path.resolve(<span class="string">'node_modules'</span>)],</span><br><span class="line">        extensions:[<span class="string">'.js'</span>,<span class="string">'.css'</span>,<span class="string">'.json'</span>,<span class="string">'.vue'</span>], <span class="comment">// é™å®šæ‰©å±•åï¼ŒæŒ‰åºä¾æ¬¡è§£æ</span></span><br><span class="line">        mainFields:[<span class="string">'style'</span>,<span class="string">'main'</span>,<span class="string">'index'</span>], <span class="comment">// å…¥å£æ–‡ä»¶çš„åå­— index.js</span></span><br><span class="line">        alias:&#123; <span class="comment">// è®¾ç½®åˆ«åï¼Œåœ¨index.jså¼•å…¥æ—¶å¯ç›´æ¥é‡‡ç”¨ import 'bootstrap'</span></span><br><span class="line">            bootstrap:<span class="string">'bootstrap/dist/css/bootstrap.css'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="18-é…ç½®ç¯å¢ƒå˜é‡"><a href="#18-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="18. é…ç½®ç¯å¢ƒå˜é‡"></a>18. é…ç½®ç¯å¢ƒå˜é‡</h2><p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">            DEV:<span class="built_in">JSON</span>.stringify(<span class="string">'dev'</span>), <span class="comment">// å­—ç¬¦ä¸²åˆ¤æ–­</span></span><br><span class="line">            FLAG:<span class="string">'true'</span>,  <span class="comment">// æ­¤å¤„ä¹Ÿä»…ä¸ºæ¼”ç¤ºï¼Œå¸ƒå°”åˆ¤æ–­</span></span><br><span class="line">            EXPRESSION:<span class="string">'1+1'</span>,</span><br><span class="line">            <span class="comment">// EXPRESSION:JSON.stringify('1+1'),  // ä¸åŠ JSON.stringifyï¼Œä¼šæ‰“å°å‡º1+1.åŠ ä¸Šåˆ™æ‰“å°2ï¼Œæ­¤å¤„ä»…ä½œæ¼”ç¤º</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="comment">// ç¯å¢ƒå˜é‡é…ç½®</span></span><br><span class="line"><span class="keyword">let</span> url=<span class="string">""</span>;</span><br><span class="line"><span class="keyword">if</span>(DEV == <span class="string">'dev'</span>)&#123;</span><br><span class="line">    url = <span class="string">'http://localhost:8081'</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    url = <span class="string">'http://www.baidu.com'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(DEV);</span><br><span class="line"><span class="built_in">console</span>.log(EXPRESSION);</span><br><span class="line"><span class="built_in">console</span>.log(url);</span><br></pre></td></tr></table></figure>

<h2 id="19-åŒºåˆ†ä¸åŒç¯å¢ƒå˜é‡ï¼ˆç¯å¢ƒç»§æ‰¿ï¼‰"><a href="#19-åŒºåˆ†ä¸åŒç¯å¢ƒå˜é‡ï¼ˆç¯å¢ƒç»§æ‰¿ï¼‰" class="headerlink" title="19. åŒºåˆ†ä¸åŒç¯å¢ƒå˜é‡ï¼ˆç¯å¢ƒç»§æ‰¿ï¼‰"></a>19. åŒºåˆ†ä¸åŒç¯å¢ƒå˜é‡ï¼ˆç¯å¢ƒç»§æ‰¿ï¼‰</h2><p>éœ€å®‰è£…æ’ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">cnpm i --save-dev webpack-merge</span><br><span class="line"><span class="number">1</span>&gt; åˆ›å»ºåŸºç¡€é…ç½®æ–‡ä»¶webpack.base.jsï¼› <span class="number">2</span>&gt; åˆ›å»ºå¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶webpack.dev.jsï¼› <span class="number">3</span>&gt; åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶webpack.pro.jsï¼› é€šè¿‡webpack-mergeå¯ä»¥å®ç°ä¸åŒç¯å¢ƒé…ç½®æ–‡ä»¶ä¸åŸºç¡€é…ç½®æ–‡ä»¶çš„ç»§æ‰¿/è¦†ç›–ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.base.js é…ç½®åŸºç¡€ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.dev.js é…ç½®å¼€å‘ç¯å¢ƒä¿¡æ¯</span></span><br><span class="line"><span class="keyword">let</span> &#123;smart&#125; = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">let</span> base = <span class="built_in">require</span>(<span class="string">'./webpack.base.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = smart(base,&#123;</span><br><span class="line">    mode: <span class="string">'development'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.pro.js é…ç½®ç”Ÿäº§ç¯å¢ƒä¿¡æ¯</span></span><br><span class="line"><span class="keyword">let</span> &#123;smart&#125; = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">let</span> base = <span class="built_in">require</span>(<span class="string">'./webpack.base.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = smart(base,&#123;</span><br><span class="line">    mode: <span class="string">'production'</span></span><br><span class="line">&#125;)</span><br><span class="line">å¦‚å¼€å¯ä¸åŒç¯å¢ƒï¼Œå¯æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š npm run build -- --config webpack.pro.js äº¦å¯è®¾ç½®package.jsonæ–‡ä»¶ï¼š</span><br><span class="line"></span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.js"</span>,</span><br><span class="line">    <span class="string">"b-dev"</span>: <span class="string">"webpack --config webpack.dev.js"</span>,</span><br><span class="line">    <span class="string">"b-pro"</span>: <span class="string">"webpack --config webpack.pro.js"</span>,</span><br><span class="line">    <span class="string">"wds"</span>: <span class="string">"webpack-dev-server"</span>,</span><br><span class="line">    <span class="string">"server"</span>: <span class="string">"node server.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ç›¸åº”ç¯å¢ƒï¼šnpm run b-dev æˆ– npm run b-proã€‚</span><br></pre></td></tr></table></figure>

<h2 id="20-ä¼˜åŒ–é¡¹"><a href="#20-ä¼˜åŒ–é¡¹" class="headerlink" title="20. ä¼˜åŒ–é¡¹"></a>20. ä¼˜åŒ–é¡¹</h2><p>noParse<br>åŠŸèƒ½ï¼šä¸å»è§£æåŒ…ï¼ˆå¦‚jQueryï¼‰ä¸­çš„ä¾èµ–åº“ã€‚ éœ€é…ç½®configã€‚</p>
<p>excludeæˆ–include<br>åŠŸèƒ½ï¼šæ’é™¤æˆ–æŒ‡å®šæŸ¥æ‰¾è·¯å¾„/æ–‡ä»¶å¤¹ï¼Œé…ç½®å…¶ä¸€å³å¯ã€‚ éœ€é…ç½®configã€‚</p>
<p>momentæ—¶é—´æ’ä»¶åŠIgnorePlugin<br>åŠŸèƒ½ï¼šæ ¼å¼åŒ–æ—¶é—´ï¼Œæ—¶é—´è®¡ç®—ç­‰ï¼Œå¯ä»¥è®¾ç½®è¯­è¨€ã€‚ å®‰è£…ï¼šcnpm i â€“save-dev moment</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—¶é—´æ’ä»¶moment</span></span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">'moment'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'moment/locale/zh-cn'</span>; <span class="comment">// ä»…å¼•å…¥ä¸­æ–‡åŒ…</span></span><br><span class="line">moment.locale(<span class="string">'zh-cn'</span>); <span class="comment">// è®¾ç½®è¯­è¨€</span></span><br><span class="line"><span class="keyword">let</span> r = moment().endOf(<span class="string">'day'</span>).fromNow();</span><br><span class="line"><span class="built_in">console</span>.log(r);</span><br><span class="line">éœ€é…ç½®configã€‚</span><br></pre></td></tr></table></figure>

<p>happypackå¤šçº¿ç¨‹æ‰“åŒ…æ¨¡å—<br>å®‰è£…ï¼šcnpm i â€“save-dev happypackï¼Œcnpm i â€“save-dev @babel/preset-react å¤šçº¿ç¨‹æ‰“åŒ…è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Happy[css]: Version: <span class="number">5.0</span><span class="number">.1</span>. Threads: <span class="number">3</span></span><br><span class="line">i ï½¢wdsï½£: Project is running at http:<span class="comment">//localhost:8081/</span></span><br><span class="line">i ï½¢wdsï½£: webpack output is served <span class="keyword">from</span> /</span><br><span class="line">i ï½¢wdsï½£: Content not <span class="keyword">from</span> webpack is served <span class="keyword">from</span> ./dist</span><br><span class="line">Happy[css]: All <span class="keyword">set</span>; signaling webpack to proceed.</span><br><span class="line">Happy[js]: Version: 5.0.1. Threads: 3</span><br><span class="line">Happy[js]: All <span class="keyword">set</span>; signaling webpack to proceed.</span><br><span class="line">i ï½¢wdmï½£: Hash: 7b2804c8263a364b7bf0</span><br><span class="line">Version: webpack 4.41.4</span><br><span class="line">Time: 2572ms</span><br><span class="line">Built at: 2019-12-21 10:31:04 PM</span><br><span class="line">éœ€é…ç½®configã€‚</span><br></pre></td></tr></table></figure>

<p>webpackè‡ªå¸¦ä¼˜åŒ–ï¼ˆtree-shaking + scope hostingï¼‰<br><strong>tree-shakingï¼šé‡‡ç”¨importå¼•å…¥ ç”Ÿäº§ç¯å¢ƒä¸‹ï¼ŒæŠŠæ²¡ç”¨çš„åˆ°çš„ä»£ç  è‡ªåŠ¨åˆ é™¤æ‰ï¼›</strong><br><strong>scope hostingï¼šä½œç”¨åŸŸæå‡ï¼Œwebpackæ‰“åŒ…æ—¶ è‡ªåŠ¨ç®€åŒ– çœç•¥ä¸­é—´ä»£ç ï¼›</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.jsä¸­</span></span><br><span class="line"><span class="comment">// webpackè‡ªå¸¦ä¼˜åŒ–åŠŸèƒ½ æµ‹è¯•</span></span><br><span class="line"><span class="keyword">import</span> calc <span class="keyword">from</span> <span class="string">'./test'</span></span><br><span class="line"><span class="built_in">console</span>.log(calc.sum(<span class="number">1</span>,<span class="number">2</span>));<span class="comment">//è¦æ¢æˆcalc.default.sum</span></span><br><span class="line"><span class="comment">// import åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ å¯ä»¥è‡ªåŠ¨å»æ‰ç”¨ä¸åˆ°çš„ä»£ç </span></span><br><span class="line"><span class="comment">// tree-shaking æŠŠæ²¡ç”¨çš„åˆ°çš„ä»£ç  è‡ªåŠ¨åˆ é™¤æ‰</span></span><br><span class="line"><span class="comment">// let calc = require('./test')</span></span><br><span class="line"><span class="comment">// console.log(calc.default.sum(1,2)); // é‡‡ç”¨requireæ–¹å¼ï¼Œsumåœ¨defaultä¸­</span></span><br><span class="line"><span class="comment">// ES6 æ¨¡å—ä¼šæŠŠç»“æœæ”¾åˆ°defaultä¸­</span></span><br><span class="line"><span class="comment">// require ä¸æ”¯æŒtree-shaking,å¼•å…¥ä¸èƒ½åƒimportä¸€æ ·åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å»é™¤å¤šä½™ä»£ç ï¼Œæ•…æ¨èä½¿ç”¨importå¼•å…¥</span></span><br><span class="line"><span class="comment">// scope hosting ä½œç”¨åŸŸæå‡</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> d = a + b + c;</span><br><span class="line"><span class="built_in">console</span>.log(d, <span class="string">'--------------------'</span>) <span class="comment">// webpackæ‰“åŒ…æ—¶ è‡ªåŠ¨ç®€åŒ– çœç•¥ä¸­é—´ä»£ç ï¼Œè¿”å›æœ€ç»ˆç»“æœ</span></span><br><span class="line">æŠ½ç¦»å…¬å…±ä»£ç ã€å¯¼è‡´å…¶ä»–é—®é¢˜ã€‘</span><br><span class="line">ä½ç½®ï¼šoptimization &#123; <span class="attr">splitChunks</span>:&#123;...&#125; &#125;</span><br><span class="line">é—®é¢˜ï¼šæ·»åŠ splitChunksé…ç½®åï¼Œä¼šå½±å“js/cssç­‰æ–‡ä»¶çš„æ‰“åŒ…ï¼Œæµè§ˆå™¨æ— æ•ˆæœã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.jsä¸­ç¤ºä¾‹ä»£ç ï¼š</span></span><br><span class="line"><span class="comment">// æŠ½ç¦»å…¬å…±ä»£ç  æµ‹è¯•</span></span><br><span class="line"><span class="comment">// console.log('æŠ½ç¦»å…¬å…±ä»£ç  æµ‹è¯•')//æ˜¯ä¸ºäº†ç¼“å­˜ï¼Œæé«˜åŠ è½½é€Ÿåº¦ï¼Œåˆ‡æ¢é¡µé¢æ—¶ç¼“å­˜å…¬å…±çš„é¡µé¢éƒ¨åˆ†æ ·å¼ã€‚</span></span><br><span class="line"><span class="comment">// import './a.js'</span></span><br><span class="line"><span class="comment">// import './b.js'</span></span><br><span class="line"><span class="comment">// console.log('./index.js')</span></span><br><span class="line"><span class="comment">// import jquery from 'jquery';</span></span><br><span class="line"><span class="comment">// console.log(jquery)</span></span><br></pre></td></tr></table></figure>
<p>éœ€é…ç½®configï¼Œè·Ÿå•å…¥å£ï¼Œå•å‡ºå£çš„æ–‡ä»¶ç›¸æ¯”ï¼Œentryç°åœ¨æ˜¯ä¸€ä¸ªå¯¹è±¡äº†ï¼Œoutput çš„ filename å¤šäº†ä¸€ä¸ª [name].ã€‚<br>æœ€åæ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ° dist ç›®å½•ä¸‹é¢ç”Ÿæˆäº† index.bundle.js å’Œ signup.bundle.js ã€‚<br>æ‰€ä»¥è¿™é‡Œçš„ [name] ç­‰åŒäº entry å®šä¹‰çš„é”®åã€‚<br>é€‚åˆå¤šé¡µé¢åº”ç”¨ï¼Œç¼“å­˜å…¬å…±éƒ¨åˆ†ä»£ç <br>å½“é‡åˆ°è¯¸å¤šå­åŠŸèƒ½æ¨¡å—æ—¶ï¼Œå…¨éƒ¨æ‰“åŒ…åœ¨ä¸€èµ·çš„è¯ä¼šæœ‰å¥½å‡ MBï¼Œæ‰€ä»¥æœ€ä½³æ–¹å¼æ˜¯è¿›è¡Œå¤šå…¥å£æ‰“åŒ…ã€‚<br>ä»¥ä¸‹æ¥è‡ªä»–äººçš„é¡¹ç›®å»ºè®®ï¼š<br>é¦–å…ˆï¼Œé¡¹ç›®æ‰“åŒ…ç­–ç•¥éµå¾ªä»¥ä¸‹å‡ ç‚¹åŸåˆ™ï¼š<br><strong>é€‰æ‹©åˆé€‚çš„æ‰“åŒ…ç²’åº¦ï¼Œç”Ÿæˆçš„å•æ–‡ä»¶å¤§å°ä¸è¦è¶…è¿‡500KB<br>   å……åˆ†åˆ©ç”¨æµè§ˆå™¨çš„å¹¶å‘è¯·æ±‚ï¼ŒåŒæ—¶ä¿è¯å¹¶å‘æ•°ä¸è¶…è¿‡6<br>   å°½å¯èƒ½è®©æµè§ˆå™¨å‘½ä¸­304ï¼Œé¢‘ç¹æ”¹åŠ¨çš„ä¸šåŠ¡ä»£ç ä¸è¦ä¸å…¬å…±ä»£ç æ‰“åŒ…<br>   é¿å…åŠ è½½å¤ªå¤šç”¨ä¸åˆ°çš„ä»£ç ï¼Œå±‚çº§è¾ƒæ·±çš„é¡µé¢è¿›è¡Œå¼‚æ­¥åŠ è½½</strong></p>
<blockquote>
<p>ç¬¬ä¸‰æ–¹åº“å¦‚vueã€jqueryã€bootstrapæ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶<br> å…¬å…±ç»„ä»¶å¦‚å¼¹çª—ã€èœå•ç­‰æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶<br> å·¥å…·ç±»ã€é¡¹ç›®é€šç”¨åŸºç±»æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶<br> å„ä¸ªåŠŸèƒ½æ¨¡å—æ‰“åŒ…å‡ºè‡ªå·±çš„å…¥å£æ–‡ä»¶<br>  å„åŠŸèƒ½æ¨¡å—ä½œç”¨ä¸€ä¸ªSPAï¼Œå­é¡µé¢è¿›è¡Œå¼‚æ­¥åŠ è½½</p>
</blockquote>
<p><img src="https://img-blog.csdn.net/20180620225415604?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1N1cGVyX0xE/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="æ‡’åŠ è½½"><a href="#æ‡’åŠ è½½" class="headerlink" title="æ‡’åŠ è½½"></a>æ‡’åŠ è½½</h2><p>åœºæ™¯ï¼šæ’­æ”¾éŸ³ä¹ï¼Œç‚¹æŒ‰é’®å†åŠ è½½èµ„æºæ’­æ”¾ã€‚<br>ä»‹ç»ï¼šåœ¨jsä»£ç å›è°ƒå‡½æ•°ä¸­importå…¶ä»–jsæ–‡ä»¶ï¼Œå¹¶è·å–å…¶ä¸­çš„æ•°æ®ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// source.jsä¸­</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">'lazy-load'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.jsä¸­</span></span><br><span class="line"><span class="comment">// æ‡’åŠ è½½ æµ‹è¯•</span></span><br><span class="line"><span class="keyword">let</span> button = <span class="built_in">document</span>.createElement(<span class="string">'button'</span>);<span class="comment">//ç»‘å®šç›‘å¬äº‹ä»¶</span></span><br><span class="line">button.innerHTML = <span class="string">'Hello'</span>;</span><br><span class="line">button.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">import</span>(<span class="string">'./source.js'</span>).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;  <span class="comment">// å›è°ƒå‡½æ•°ä¸­å¼•å…¥ï¼Œè·¯ç”±æ‡’åŠ è½½çš„å®ç°å°±æ˜¯é importè¯­æ³•</span></span><br><span class="line">    <span class="comment">//es6ä¸­çš„è‰æ¡ˆè¯­æ³•ï¼Œjsonpå®ç°åŠ¨æ€åŠ è½½æ–‡ä»¶</span></span><br><span class="line">        <span class="built_in">console</span>.log(data.default);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(button);</span><br></pre></td></tr></table></figure>

<h2 id="çƒ­æ›´æ–°"><a href="#çƒ­æ›´æ–°" class="headerlink" title="çƒ­æ›´æ–°"></a>çƒ­æ›´æ–°</h2><p>åŠŸèƒ½ï¼šå±€éƒ¨æ›´æ–°ä¿®æ”¹çš„å†…å®¹ã€‚æ¯æ¬¡æ›´æ”¹é¡µé¢åªå˜ä¸€éƒ¨åˆ†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.jsä¸­</span></span><br><span class="line"><span class="comment">// çƒ­æ›´æ–° æµ‹è¯•</span></span><br><span class="line"><span class="keyword">import</span> str <span class="keyword">from</span> <span class="string">'./source'</span>;<span class="comment">//</span></span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">module</span>.hot)&#123; <span class="comment">// å¦‚æœdevServerä¸­hotä¸ºtrueï¼Œåˆ™å¯åŠ¨çƒ­æ›´æ–°</span></span><br><span class="line">    <span class="built_in">module</span>.hot.accept(<span class="string">'./source'</span>,()=&gt;&#123;<span class="comment">//è‹¥æ”¯æŒçƒ­æ›´æ–°</span></span><br><span class="line">        <span class="keyword">let</span> str = <span class="built_in">require</span>(<span class="string">'./source'</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(str)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">éœ€é…ç½®configã€‚</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹ä¸ºä¸Šè¿°ä¼˜åŒ–é¡¹åœ¨webpack.config.jsä¸­çš„é…ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Happypack = <span class="built_in">require</span>(<span class="string">"happypack"</span>); <span class="comment">// 4ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        hot:<span class="literal">true</span>, <span class="comment">// </span></span><br><span class="line">    &#125;,</span><br><span class="line">    optimization: &#123; <span class="comment">// ä¼˜åŒ–é¡¹</span></span><br><span class="line">        minimizer: [ ],</span><br><span class="line">        <span class="comment">// splitChunks:&#123; // åˆ†å‰²ä»£ç å— 6)</span></span><br><span class="line">        <span class="comment">//     cacheGroups:&#123; // ç¼“å­˜ç»„</span></span><br><span class="line">        <span class="comment">//         common:&#123; // æŠ½ç¦» å…¬å…±çš„æ¨¡å—</span></span><br><span class="line">        <span class="comment">//             chunks:'initial',</span></span><br><span class="line">        <span class="comment">//             minSize:0, // æœ€å°å¤§å°</span></span><br><span class="line">        <span class="comment">//             minChunks:2, // æœ€å°å‡ºç°æ¬¡æ•°</span></span><br><span class="line">        <span class="comment">//         &#125;,</span></span><br><span class="line">        <span class="comment">//         vendor:&#123; // æŠ½ç¦» ç¬¬ä¸‰æ–¹æ¨¡å—</span></span><br><span class="line">        <span class="comment">//             priority:1, // æƒé‡é«˜ï¼Œä¼˜å…ˆæŠ½ç¦»ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå†æŠ½ç¦»å…¶ä»–</span></span><br><span class="line">        <span class="comment">//             test:/node_modules/, // è¦æŠ½ç¦»å‡ºçš„æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">//             chunks: 'initial',</span></span><br><span class="line">        <span class="comment">//             minSize:0,</span></span><br><span class="line">        <span class="comment">//             minChunks:2</span></span><br><span class="line">        <span class="comment">//         &#125;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        noParse:<span class="regexp">/jquery/</span>, <span class="comment">// æ’å‡ºä¸éœ€è¦è§£æçš„åŒ…ï¼ˆæ²¡æœ‰å…¶ä»–ä¾èµ–é¡¹çš„åŒ…ï¼‰ï¼› 1)</span></span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// ä¼˜åŒ–ï¼šå¤šçº¿ç¨‹æ‰“åŒ…cssæ–‡ä»¶</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: <span class="string">'Happypack/loader?id=css'</span> &#125;,  <span class="comment">// 4)</span></span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            &#123;<span class="attr">test</span>: <span class="regexp">/\.js$/</span>, </span><br><span class="line">            <span class="comment">// excludeå’Œincludeé…ç½®ä¸€ä¸ªå³å¯ 2)</span></span><br><span class="line">            exclude:<span class="regexp">/node_modules/</span>,  <span class="comment">// æ’é™¤æ–‡ä»¶å¤¹ï¼Œä¸å»è¯¥è·¯å¾„ä¸‹æŸ¥æ‰¾</span></span><br><span class="line">            <span class="comment">// include:path.resolve('src'), // æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œå»è¯¥è·¯å¾„ä¸‹æŸ¥æ‰¾</span></span><br><span class="line">            <span class="comment">// ä½¿ç”¨happypackå¯¹jsè¿›è¡Œæ‰“åŒ…</span></span><br><span class="line">            use: <span class="string">'Happypack/loader?id=js'</span>  <span class="comment">// 4)</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.NamedModulesPlugin(), <span class="comment">// æ‰“å°æ›´æ–°çš„æ¨¡å—è·¯å¾„ 8)</span></span><br><span class="line">        <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(), <span class="comment">// çƒ­æ›´æ–°æ’ä»¶ 8)</span></span><br><span class="line">        <span class="keyword">new</span> Happypack(&#123; <span class="comment">// å¤šçº¿ç¨‹æ–¹å¼æ‰“åŒ…cssæ–‡ä»¶ 4)</span></span><br><span class="line">            id: <span class="string">'css'</span>,</span><br><span class="line">            use:[<span class="string">'style-loader'</span>,<span class="string">'css-loader'</span>]</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> Happypack(&#123; <span class="comment">// å¤šçº¿ç¨‹æ–¹å¼æ‰“åŒ…jsæ–‡ä»¶ 4)</span></span><br><span class="line">            id: <span class="string">'js'</span>,</span><br><span class="line">            use:[&#123;</span><br><span class="line">                loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                options:&#123;</span><br><span class="line">                    presets: [</span><br><span class="line">                        <span class="string">'@babel/preset-env'</span>,</span><br><span class="line">                        <span class="string">'@babel/preset-react'</span></span><br><span class="line">                    ],</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> webpack.IgnorePlugin(<span class="regexp">/\.\/locale/</span>, /moment/), <span class="comment">// å¿½ç•¥momentæ’ä»¶ä¸­çš„localeæ¨¡å— 3)</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





      
      <!-- reward -->
      
      <div id="reward-btn">
        æ‰“èµ
      </div>
      
    </div>
    
    
      <!-- copyright -->
      
        <div class="declare">
          <ul class="post-copyright">
            <li>
              <i class="ri-copyright-line"></i>
              <strong>ç‰ˆæƒå£°æ˜ï¼š </strong s>
              æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://www.apache.org/licenses/LICENSE-2.0.html" rel="external nofollow"
                target="_blank">Apache License 2.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
            </li>
          </ul>
        </div>
        
    <footer class="article-footer">
      
          
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        åˆ†äº«
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://yoursite.com/2020/01/15/webpack%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
    </div>
</div>

<div id="share-mask"></div>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../../tags/%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%AD%A6%E4%B9%A0/" rel="tag">å·¥å…·ç±»å­¦ä¹ </a></li></ul>


    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="../../../02/17/React%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            Reacté¡¹ç›®éœ€æ±‚åˆ†æ
          
        </div>
      </a>
    
    
      <a href="../../../../2019/12/25/%E2%80%9C%E6%96%B0%E5%9F%BA%E5%BB%BA%E2%80%9D%E7%9A%84%E6%99%BA%E8%83%BD%E5%8C%96%E6%80%9D%E8%80%83/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <div class="article-nav-title">â€œæ–°åŸºå»ºâ€çš„æ™ºèƒ½åŒ–æ€è€ƒ</div>
      </a>
    
  </nav>


  

  
  
<!-- valineè¯„è®º -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        notify: 'false',
        verify: 'false',
        avatar: 'mp',
        placeholder: 'ç»™æˆ‘çš„æ–‡ç« åŠ ç‚¹è¯„è®ºå§~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020
        Wangqiuxia
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    <aside class="sidebar">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="../../../../index.html"><img src="/images/ayer-side.svg" alt="çˆ±äº§å“ï¼Œçˆ±å‰ç«¯ï¼"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../index.html">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../tags/%E6%8A%80%E6%9C%AF/">å°ç¨‹åº</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../http:/shenyu-vip.lofter.com">æ‘„å½±</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../https:/v.xiumi.us/stage/v5/4IeLH/197507179">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="../../../../atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>è¯·æˆ‘å–æ¯å’–å•¡å§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="../../../../images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="../../../../images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="../../../../js/jquery-2.0.3.min.js"></script>


<script src="../../../../js/jquery.justifiedGallery.min.js"></script>


<script src="../../../../js/lazyload.min.js"></script>


<script src="../../../../js/busuanzi-2.3.pure.min.js"></script>


<script src="../../../../js/share.js"></script>



<script src="../../../../fancybox/jquery.fancybox.min.js"></script>




<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['åšä¸€ä¸ªæœ‰æƒ…æ€€æ‡‚äº§å“çš„ç¨‹åºåª›ï¼','ä¸šç²¾äºå‹¤è’äºå¬‰ï¼è¡Œæˆäºæ€æ¯äºéšï¼','è¶ŠåŠªåŠ›è¶Šå¹¸è¿'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script src="../../../../js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: false
  }
</script>


<script src="../../../../js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>

    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=518895142&auto=1&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
  </div>
</body>

</html>